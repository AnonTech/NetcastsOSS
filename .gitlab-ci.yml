# A functional, but probably terrible, example of GitLab CI for Flutter
image: cirrusci/flutter

variables:
before_script:
  - flutter channel dev
  - flutter upgrade

stages:
  - test
#  - build

lint:
  stage: test
  script:
    - flutter analyze

tests:
  stage: test
  script:
    - flutter test

mysql-activity:
  only:
    - schedules
  image:
    name: arey/mysql-client
    entrypoint: [""]
  script:
    - mysql -h $DB_HOST -p $DB_PASS -D $DB_NAME -e "UPDATE podcasts SET artworkOrig = artworkOrig ORDER BY id ASC LIMIT 1;"

#build:
#  stage: build
#  script:
#    - flutter build apk
